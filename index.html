<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Galaxia Code Studio</title>

<style>
body{
  margin:0;
  background:#050a1a;
  color:#00f6ff;
  font-family:system-ui;
}
header{
  padding:18px;
  text-align:center;
  font-size:28px;
  letter-spacing:3px;
  box-shadow:0 0 40px #00f6ff55;
}
#layout{
  display:grid;
  grid-template-columns:1fr 1fr;
  height:calc(100vh - 80px);
}
#editors{
  display:grid;
  grid-template-rows:1fr 1fr;
}
.editor{
  padding:10px;
  border-bottom:1px solid #00f6ff22;
}
.editor h3{margin:4px 0}
textarea{
  width:100%;
  height:100%;
  background:#000;
  color:#00f6ff;
  border:1px solid #00f6ff44;
  padding:10px;
  box-sizing:border-box;
  font-family:monospace;
}
#controls{
  padding:10px;
  border-top:1px solid #00f6ff22;
}
button{
  background:#00f6ff22;
  border:1px solid #00f6ff;
  color:#00f6ff;
  padding:12px 24px;
  cursor:pointer;
  font-size:16px;
}
button:hover{background:#00f6ff55}
#preview{
  background:#000;
  border-left:2px solid #00f6ff33;
}
iframe{
  width:100%;
  height:100%;
  border:none;
  background:white;
}
</style>
</head>

<body>

<header>üåå GALAXIA CODE STUDIO</header>

<div id="layout">

<div id="editors">

<div class="editor">
<h3>1Ô∏è‚É£ HTML</h3>
<textarea id="htmlCode"><h1>Hello Galaxia</h1>
<p id="msg">Waiting...</p></textarea>
</div>

<div class="editor">
<h3>2Ô∏è‚É£ CSS</h3>
<textarea id="cssCode">body{font-family:Arial;text-align:center}
h1{color:purple}</textarea>
</div>

<div class="editor">
<h3>3Ô∏è‚É£ JavaScript</h3>
<textarea id="jsCode">document.getElementById("msg").innerText="JS Loaded";</textarea>
</div>

<div class="editor">
<h3>4Ô∏è‚É£ GalaScript</h3>
<textarea id="galaCode">
Say("Welcome to Galaxia")
SetText("#msg","From GalaScript")
SetColor("h1","blue")
</textarea>
</div>

<div id="controls">
<button onclick="runAll()">‚ñ∂ RUN ALL</button>
</div>

</div>

<div id="preview">
<iframe id="frame"></iframe>
</div>

</div>

<script>
function parseGala(script){
  let js="";
  script.split("\n").forEach(line=>{
    line=line.trim();
    if(line.startsWith("Say")){
      const t=line.match(/"(.*)"/)?.[1];
      js+=`console.log(${JSON.stringify(t)});\n`;
    }
    if(line.startsWith("SetText")){
      const p=line.match(/"(.*?)"/g);
      if(p) js+=`document.querySelector(${p[0]}).innerText=${p[1]};\n`;
    }
    if(line.startsWith("SetColor")){
      const p=line.match(/"(.*?)"/g);
      if(p) js+=`document.querySelector(${p[0]}).style.color=${p[1]};\n`;
    }
  });
  return js;
}

function runAll(){
  const html=document.getElementById("htmlCode").value;
  const css=document.getElementById("cssCode").value;
  const js=document.getElementById("jsCode").value;
  const gala=document.getElementById("galaCode").value;

  const galaJS=parseGala(gala);

  const doc=`
<!DOCTYPE html>
<html>
<head>
<style>${css}</style>
</head>
<body>
${html}
<script>
${js}
${galaJS}
<\/script>
</body>
</html>`;

  const iframe=document.getElementById("frame");
  iframe.srcdoc=doc;
}
</script>

</body>
</html>
